{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      role_list: [],\n      user_id: this.$route.query.user_id\n    };\n  },\n  created() {\n    this.getInfo();\n  },\n  methods: {\n    async getInfo() {\n      const res1 = await axios.get('http://119.39.26.201:5000/vip_user/get_roles', {\n        params: {\n          user_id: this.user_id\n        }\n      });\n      console.log(res1);\n      this.role_list = res1.data.data;\n      console.log(this.role_list);\n    },\n    async roleInfo(roleId, isBuild, headId) {\n      this.$router.push({\n        path: '/RoleInformation',\n        query: {\n          user_id: this.user_id,\n          role_id: roleId,\n          is_built_in: isBuild,\n          head_portrait_id: headId\n        }\n      });\n    },\n    // async getPictures (headId) {\n\n    //     let length = role_log.length\n    //     for (let i = 0 ; i < length; i++) {\n    //       const res = await axios.get('http://119.39.26.201:5000/builtin_role_administrator/information/get_role_head_portrait', {\n    //         params: {\n    //           role_id: role_log[i].role_id,\n    //           user_id: \"000000\"\n    //         },\n    //         responseType: 'blob'\n    //       })\n    //       console.log(res)\n    //       const imgUrl = URL.createObjectURL(res.data)\n    //       this.pictures.push(imgUrl)\n    //     }\n    //   },\n\n    formatText(text) {\n      if (text.length > 5) {\n        return `${text.slice(0, 5)}...`;\n      }\n      return text;\n    },\n    toCreateRoles() {\n      this.$router.push({\n        path: '/CreateRoles',\n        query: {\n          user_id: this.user_id\n        }\n      });\n    },\n    async collectRole(roleId) {\n      const res = await axios.post('http://119.39.26.201:5000//vip_user/collect_role', {\n        role_id: roleId\n      });\n      console.log(res);\n      this.getInfo();\n    },\n    open() {\n      this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        // this.deleteRole(roleId)\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    async deleteRole(roleId) {\n      console.log(roleId);\n      const res = await axios.post('http://119.39.26.201:5000//vip_user/delete_user_role', {\n        role_id: roleId\n      });\n      console.log(res);\n      this.getInfo();\n    },\n    async cancelCollect(roleId) {\n      const res = await axios.post('http://119.39.26.201:5000//vip_user/cancel_collect', {\n        role_id: roleId\n      });\n      console.log(res);\n      this.getInfo();\n    }\n\n    // open() {\n    //       this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n    //         confirmButtonText: '确定',\n    //         cancelButtonText: '取消',\n    //         type: 'warning'\n    //       }).then(() => {\n    //         this.$message({\n    //           type: 'success',\n    //           message: '删除成功!'\n    //         });\n    //       }).catch(() => {\n    //         this.$message({\n    //           type: 'info',\n    //           message: '已取消删除'\n    //         });          \n    //       });\n    //     }\n  }\n};","map":{"version":3,"names":["axios","data","role_list","user_id","$route","query","created","getInfo","methods","res1","get","params","console","log","roleInfo","roleId","isBuild","headId","$router","push","path","role_id","is_built_in","head_portrait_id","formatText","text","length","slice","toCreateRoles","collectRole","res","post","open","$confirm","confirmButtonText","cancelButtonText","type","then","$message","message","catch","deleteRole","cancelCollect"],"sources":["src/views/ManageRoles.vue"],"sourcesContent":["<template>\r\n  <div class=\"wrapped\">\r\n    <div class=\"left\">\r\n      <ul class=\"leftText\">\r\n        <li @click=\"toChat()\" class=\"one\">聊天框</li>\r\n        <li class=\"two\">角色管理</li>\r\n        <li class=\"three\" @click=\"toCreateRoles()\">新建角色</li>\r\n        <li class=\"four\">设置</li>\r\n        <li class=\"five\" @click=\"exit()\">退出登录</li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"right\">\r\n      <div class=\"top\">\r\n        <img src=\"../assets/background.png\" alt=\"\" class=\"backgroundImg\">\r\n        <div class=\"logo\">\r\n        </div>\r\n        <!-- <img src=\"../assets/logo.png\" alt=\"\" class=\"logo\"> -->\r\n        <h4 class='nickname'>用户昵称</h4>\r\n      </div>\r\n      <div class=\"myCollect\">\r\n        <div class=\"collectText\">\r\n          <ul class='collectTextWord'>\r\n            <li class='one'>我</li>\r\n            <li class='two'>的</li>\r\n            <li class='three'>收</li>\r\n            <li class='four'>藏</li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"collectContent\">\r\n          <div class=\"item\" v-for=\"(item, index) in role_list\" :key=\"index\" v-show='item.is_collect'>\r\n            <span class='roleName' @click=\"roleInfo(item.role_id, item.is_built_in, item.head_portrait_id)\">{{formatText(item.role_name)}}</span>\r\n            <span class='collectStar' @click=\"cancelCollect(item.role_id)\">&#x2605;</span>\r\n          </div>\r\n          <div class=\"item\">\r\n            <span class='roleName'>GPT3.0</span>\r\n            <span class='collectStar'>&#x2605;</span>\r\n          </div>\r\n          <div class=\"item\"></div>\r\n          <div class=\"item\"></div>\r\n          <div class=\"item\"></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"roleManage\">\r\n        <div class=\"roleText\">\r\n          <ul class='roleTextWord'>\r\n            <li class='one'>角</li>\r\n            <li class='two'>色</li>\r\n            <li class='three'>管</li>\r\n            <li class='four'>理</li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"roleContent\">\r\n          <div class=\"item\" v-for=\"(item, index) in role_list\" :key=\"index\" v-show='!item.is_collect'>\r\n            <span class='roleName' @click=\"roleInfo(item.role_id, item.is_built_in, item.head_portrait_id)\">{{formatText(item.role_name)}}</span>\r\n            <span class='star' v-show='!item.is_built_in' @click='collectRole(item.role_id)'>&#x2605;</span>\r\n            <span  class='delete'  v-show='!item.is_built_in' @click='deleteRole(item.role_id)'>x</span>\r\n          </div>\r\n          <div class=\"item\">\r\n            <span class='roleName' @click=\"roleInfo()\">GPT3.0</span>\r\n            <span class='innerRoleStar'>&#x2605;</span>\r\n          </div>\r\n          <div class=\"item\">\r\n            <span class='roleName' @click=\"roleInfo()\">GPT3.0</span>\r\n            <span class='star'>&#x2605;</span>\r\n             <!-- <el-button type=\"text\" @click=\"open()\">点击打开 Message Box</el-button> -->\r\n            <span  class='delete'  @click='open()'>x</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n  data () {\r\n    return {\r\n      role_list: [],\r\n      user_id: this.$route.query.user_id,\r\n    }\r\n\r\n  },\r\n\r\n  created () {\r\n    this.getInfo()\r\n  },\r\n\r\nmethods: {\r\n\r\n  async getInfo() {\r\n    const res1 = await axios.get('http://119.39.26.201:5000/vip_user/get_roles', {\r\n        params: {\r\n          user_id: this.user_id\r\n        }\r\n      })\r\n      console.log(res1)\r\n      this.role_list = res1.data.data\r\n      console.log(this.role_list);\r\n\r\n  },\r\n  async roleInfo(roleId, isBuild, headId) {\r\n    this.$router.push({\r\n        path: '/RoleInformation',\r\n        query: {\r\n              user_id: this.user_id,\r\n              role_id: roleId,\r\n              is_built_in: isBuild,\r\n              head_portrait_id: headId,\r\n            }\r\n      })\r\n    \r\n  },\r\n\r\n  // async getPictures (headId) {\r\n      \r\n  //     let length = role_log.length\r\n  //     for (let i = 0 ; i < length; i++) {\r\n  //       const res = await axios.get('http://119.39.26.201:5000/builtin_role_administrator/information/get_role_head_portrait', {\r\n  //         params: {\r\n  //           role_id: role_log[i].role_id,\r\n  //           user_id: \"000000\"\r\n  //         },\r\n  //         responseType: 'blob'\r\n  //       })\r\n  //       console.log(res)\r\n  //       const imgUrl = URL.createObjectURL(res.data)\r\n  //       this.pictures.push(imgUrl)\r\n  //     }\r\n  //   },\r\n\r\n\r\n  formatText(text) {\r\n    if (text.length > 5) {\r\n    return `${text.slice(0, 5)}...`;\r\n    }\r\n    return text;\r\n  },\r\n\r\n  toCreateRoles() {\r\n      this.$router.push({\r\n        path: '/CreateRoles',\r\n        query: {\r\n              user_id: this.user_id,\r\n            }\r\n      })\r\n  },\r\n\r\n   async collectRole(roleId) {\r\n     const res = await axios.post('http://119.39.26.201:5000//vip_user/collect_role', {\r\n        role_id: roleId,\r\n      })\r\n     console.log(res)\r\n     this.getInfo()\r\n  },\r\n    open() {\r\n      this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          // this.deleteRole(roleId)\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          });\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });          \r\n        });\r\n\r\n    },\r\n\r\n    async deleteRole(roleId) {\r\n      console.log(roleId);\r\n     const res = await axios.post('http://119.39.26.201:5000//vip_user/delete_user_role', {\r\n        role_id: roleId,\r\n      })\r\n     console.log(res)\r\n     this.getInfo()\r\n  },\r\n\r\n  async cancelCollect(roleId) {\r\n     const res = await axios.post('http://119.39.26.201:5000//vip_user/cancel_collect', {\r\n        role_id: roleId,\r\n      })\r\n     console.log(res)\r\n     this.getInfo()\r\n  },\r\n\r\n  // open() {\r\n  //       this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n  //         confirmButtonText: '确定',\r\n  //         cancelButtonText: '取消',\r\n  //         type: 'warning'\r\n  //       }).then(() => {\r\n  //         this.$message({\r\n  //           type: 'success',\r\n  //           message: '删除成功!'\r\n  //         });\r\n  //       }).catch(() => {\r\n  //         this.$message({\r\n  //           type: 'info',\r\n  //           message: '已取消删除'\r\n  //         });          \r\n  //       });\r\n  //     }\r\n}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrapped {\r\n    display: flex;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #465069;\r\n    opacity: 0.9;\r\n  }\r\n\r\n  .left {\r\n    width: 90px;\r\n    /* height: 705px; */\r\n    height: 100%;\r\n    background-color: #D6ECFF;\r\n    border-radius: 10px 0 0 10px;\r\n  }\r\n\r\n  .leftText {\r\n    position: relative;\r\n    color: #9CBFFB;\r\n    font-weight: 700;\r\n    font-size: 18px;\r\n    text-align: center;\r\n  }\r\n\r\n  .leftText li {\r\n    width: 90px;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    border: 2px solid #9CBFFB;\r\n    border-radius: 10px;\r\n  }\r\n\r\n  .leftText li:hover {\r\n    background-color: #a0bff5;\r\n    color: #1990FF;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .leftText .one {\r\n    position: absolute;\r\n    top: 90px;\r\n  }\r\n\r\n  .leftText .two {\r\n    position: absolute;\r\n    top: 210px;\r\n    color: #1990FF;\r\n  }\r\n\r\n  .leftText .three {\r\n    position: absolute;\r\n    top: 330px;\r\n  }\r\n\r\n  .leftText .four {\r\n    position: absolute;\r\n    top: 450px;\r\n  }\r\n\r\n  .leftText .five {\r\n    position: absolute;\r\n    top: 570px;\r\n  }\r\n\r\n  .right {\r\n    width: 1445px;\r\n    background-color: #F2F5F8;\r\n  }\r\n\r\n  .top {\r\n    position: relative;\r\n    width: 1229px;\r\n    height: 185px;\r\n    background-color: skyblue;\r\n    border-radius: 10px;\r\n    margin-top: 14px;\r\n    margin-left: 86px;\r\n  }\r\n\r\n  .top .backgroundImg {\r\n    border-radius: 10px;\r\n    width: 1229px;\r\n    height: 185px;\r\n  }\r\n\r\n  .top .logo {\r\n    width: 70px;\r\n    height: 70px;\r\n    position: absolute;\r\n    background-color: black;\r\n    border-radius: 70px;\r\n    top: 100px;\r\n    left: 5px\r\n  }\r\n\r\n  .top .nickname {\r\n    position: absolute;\r\n    color: white;\r\n    top: 115px;\r\n    left: 80px\r\n  }\r\n\r\n  .myCollect {\r\n    display: flex;\r\n    width: 1229px;\r\n    height: 170px;\r\n    /* background-color: yellow; */\r\n    margin-top: 35px;\r\n    margin-left: 86px;\r\n  }\r\n\r\n  .myCollect .collectText {\r\n    border: 2px solid #bbbbbb;\r\n    width: 122px;\r\n    height: 100%;\r\n    border-radius: 10px;\r\n    background-color: #f2f5f8;\r\n  }\r\n\r\n  .myCollect .collectContent {\r\n    border: 2px solid #bbbbbb;\r\n    width: 1107px;\r\n    border-radius: 10px;\r\n    height: 100%;\r\n    background-color: #f6fbff;\r\n  }\r\n\r\n  .collectTextWord {\r\n    position: relative;\r\n    color:black;\r\n    font-weight: 400;\r\n    font-size: 18px;\r\n    text-align: center;\r\n  }\r\n\r\n  .collectTextWord .one {\r\n    position: absolute;\r\n    top: 20px;\r\n    left: 50px;\r\n  }\r\n\r\n  .collectTextWord .two {\r\n    position: absolute;\r\n    top: 50px;\r\n    left: 50px;\r\n  }\r\n\r\n.collectTextWord .three {\r\n    position: absolute;\r\n    top: 80px;\r\n    left: 50px;\r\n  }\r\n\r\n  .collectTextWord .four {\r\n    position: absolute;\r\n    top: 110px;\r\n    left: 50px;\r\n  }\r\n\r\n  .roleManage {\r\n    display: flex;\r\n    width: 1229px;\r\n    height: 210px;\r\n    /* background-color: black; */\r\n    margin-top: 18px;\r\n    margin-left: 86px;\r\n  }\r\n\r\n  .roleManage .roleText {\r\n    border: 2px solid #bbbbbb;\r\n    width: 122px;\r\n    border-radius: 10px;\r\n    height: 100%;\r\n    background-color: #f2f5f8;\r\n  }\r\n  \r\n  .roleTextWord {\r\n    position: relative;\r\n    color:black;\r\n    font-weight: 400;\r\n    font-size: 18px;\r\n    text-align: center;\r\n  }\r\n\r\n  .roleTextWord .one {\r\n    position: absolute;\r\n    top: 30px;\r\n    left: 50px;\r\n  }\r\n\r\n  .roleTextWord .two {\r\n    position: absolute;\r\n    top: 60px;\r\n    left: 50px;\r\n  }\r\n\r\n.roleTextWord .three {\r\n    position: absolute;\r\n    top: 90px;\r\n    left: 50px;\r\n  }\r\n\r\n  .roleTextWord .four {\r\n    position: absolute;\r\n    top: 120px;\r\n    left: 50px;\r\n  }\r\n\r\n  .roleManage .roleContent {\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    justify-content: flex-start;\r\n    max-height: 210px;\r\n    overflow-y: auto;\r\n    border: 2px solid #bbbbbb;\r\n    border-radius: 10px;\r\n    width: 1107px;\r\n    height: 100%;\r\n    background-color: #f6fbff;\r\n  }\r\n\r\n   .item {\r\n    position: relative;\r\n    display: inline-block;\r\n    border-radius: 10px;\r\n    width: 130px;\r\n    height: 42px;\r\n    background-color: #c8e9fb;\r\n    margin: 20px 30px 1px;\r\n    border: 1px solid #ddd;\r\n  }\r\n\r\n  .item .roleName {\r\n    position: absolute;\r\n    line-height: 42px;\r\n    font-weight: 500;\r\n    color: #1a1c1d;\r\n    left: 10px\r\n  }\r\n\r\n  .item .roleName:hover {\r\n    color: #f6da06;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .item .star {\r\n    position: absolute;\r\n    line-height: 42px;\r\n    font-size: 20px;\r\n    color: white;\r\n    right: 23px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .item .innerRoleStar{\r\n    position: absolute;\r\n    line-height: 42px;\r\n    font-size: 20px;\r\n    color: white;\r\n    right: 10px;\r\n    cursor: pointer;\r\n  } \r\n\r\n  .item .delete {\r\n    position: absolute;\r\n    line-height: 42px;\r\n    font-size: 20px;\r\n    color: #838991;\r\n    right: 9px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .item .star:hover {\r\n    position: absolute;\r\n    line-height: 42px;\r\n    font-size: 20px;\r\n    color: gold;\r\n    right: 23px;\r\n    cursor: pointer;\r\n  }\r\n\r\n.item .innerRoleStar:hover {\r\n    position: absolute;\r\n    line-height: 42px;\r\n    font-size: 20px;\r\n    color: gold;\r\n    right: 10px;\r\n    cursor: pointer;\r\n  }\r\n\r\n\r\n  .item .delete:hover {\r\n    position: absolute;\r\n    line-height: 42px;\r\n    font-size: 20px;\r\n    font-weight: 1000px;\r\n    /* bottom: 1px; */\r\n    color: #444a55;\r\n    right: 9px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .collectStar {\r\n    position: absolute;\r\n    line-height: 42px;\r\n    font-size: 20px;\r\n    color: gold;\r\n    right: 10px;\r\n    cursor: pointer;\r\n  }\r\n</style>"],"mappings":";AA0EA,OAAAA,KAAA;AACA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,OAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF;IACA;EAEA;EAEAG,QAAA;IACA,KAAAC,OAAA;EACA;EAEAC,OAAA;IAEA,MAAAD,QAAA;MACA,MAAAE,IAAA,SAAAT,KAAA,CAAAU,GAAA;QACAC,MAAA;UACAR,OAAA,OAAAA;QACA;MACA;MACAS,OAAA,CAAAC,GAAA,CAAAJ,IAAA;MACA,KAAAP,SAAA,GAAAO,IAAA,CAAAR,IAAA,CAAAA,IAAA;MACAW,OAAA,CAAAC,GAAA,MAAAX,SAAA;IAEA;IACA,MAAAY,SAAAC,MAAA,EAAAC,OAAA,EAAAC,MAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QACAC,IAAA;QACAf,KAAA;UACAF,OAAA,OAAAA,OAAA;UACAkB,OAAA,EAAAN,MAAA;UACAO,WAAA,EAAAN,OAAA;UACAO,gBAAA,EAAAN;QACA;MACA;IAEA;IAEA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAGAO,WAAAC,IAAA;MACA,IAAAA,IAAA,CAAAC,MAAA;QACA,UAAAD,IAAA,CAAAE,KAAA;MACA;MACA,OAAAF,IAAA;IACA;IAEAG,cAAA;MACA,KAAAV,OAAA,CAAAC,IAAA;QACAC,IAAA;QACAf,KAAA;UACAF,OAAA,OAAAA;QACA;MACA;IACA;IAEA,MAAA0B,YAAAd,MAAA;MACA,MAAAe,GAAA,SAAA9B,KAAA,CAAA+B,IAAA;QACAV,OAAA,EAAAN;MACA;MACAH,OAAA,CAAAC,GAAA,CAAAiB,GAAA;MACA,KAAAvB,OAAA;IACA;IACAyB,KAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAC,IAAA;QACA;QACA,KAAAC,QAAA;UACAF,IAAA;UACAG,OAAA;QACA;MACA,GAAAC,KAAA;QACA,KAAAF,QAAA;UACAF,IAAA;UACAG,OAAA;QACA;MACA;IAEA;IAEA,MAAAE,WAAA1B,MAAA;MACAH,OAAA,CAAAC,GAAA,CAAAE,MAAA;MACA,MAAAe,GAAA,SAAA9B,KAAA,CAAA+B,IAAA;QACAV,OAAA,EAAAN;MACA;MACAH,OAAA,CAAAC,GAAA,CAAAiB,GAAA;MACA,KAAAvB,OAAA;IACA;IAEA,MAAAmC,cAAA3B,MAAA;MACA,MAAAe,GAAA,SAAA9B,KAAA,CAAA+B,IAAA;QACAV,OAAA,EAAAN;MACA;MACAH,OAAA,CAAAC,GAAA,CAAAiB,GAAA;MACA,KAAAvB,OAAA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}