{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport axios from 'axios';\nexport default {\n  name: 'ChangeRole',\n  data() {\n    return {\n      role_log: [],\n      user_id: this.$route.query.user_id,\n      text: '的海外的合法大大覅哈哈爱上的人发放时aaa',\n      pictures: [],\n      // 头像\n      role_id: [],\n      file: null,\n      // 上传的AI资料\n      file_show: null\n    };\n  },\n  created() {\n    this.getInfo();\n  },\n  methods: {\n    modifyRole() {\n      this.$router.push({\n        path: '/ModifyRole',\n        query: {\n          user_id: this.user_id\n        }\n      });\n    },\n    formatText(text) {\n      if (text.length > 18) {\n        return `${text.slice(0, 18)}...`;\n      }\n      return text;\n    },\n    async getInfo() {\n      const res1 = await axios.get('http://119.39.26.68:5000/builtin_role_administrator/information/get_role_information', {\n        params: {\n          user_id: \"000000\"\n        }\n      });\n      // console.log(this.user_id);\n      // console.log(res1);\n      this.role_log = res1.data.data;\n      console.log(this.role_log);\n      this.getPictures(this.role_log);\n    },\n    async getPictures(role_log) {\n      this.pictures = [];\n      let length = role_log.length;\n      for (let i = 0; i < length; i++) {\n        const res = await axios.get('http://119.39.26.68:5000/builtin_role_administrator/information/get_role_head_portrait', {\n          params: {\n            role_id: role_log[i].role_id,\n            user_id: \"000000\"\n          },\n          responseType: 'blob'\n        });\n        console.log(res);\n        const imgUrl = URL.createObjectURL(res.data);\n        this.pictures.push(imgUrl);\n        console.log(imgUrl);\n      }\n    },\n    uploadFile() {\n      // 创建一个 input[type=\"file\"] 元素\n      const input = document.createElement('input');\n      input.type = 'file';\n\n      // 添加 change 事件监听器\n      input.addEventListener('change', event => {\n        const file = event.target.files[0];\n        this.uploadToServer(file);\n      });\n\n      // 触发 input 元素的点击事件\n      input.click();\n    },\n    uploadToServer(file) {\n      const formData = new FormData();\n      formData.append('file', file);\n      axios.post('/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(response => {\n        // 处理上传成功的响应\n        console.log(response.data);\n      }).catch(error => {\n        // 处理上传失败的错误\n        console.error(error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","role_log","user_id","$route","query","text","pictures","role_id","file","file_show","created","getInfo","methods","modifyRole","$router","push","path","formatText","length","slice","res1","get","params","console","log","getPictures","i","res","responseType","imgUrl","URL","createObjectURL","uploadFile","input","document","createElement","type","addEventListener","event","target","files","uploadToServer","click","formData","FormData","append","post","headers","then","response","catch","error"],"sources":["src/views/ChangeRole.vue"],"sourcesContent":["<template>\r\n  <div class=\"wrapped-cr\">\r\n    <div class=\"left\">\r\n      <ul class=\"leftText\">\r\n        <li class=\"one\">修改角色</li>\r\n        <li class=\"two\">新增角色</li>\r\n        <li class=\"three\" @click=\"exit()\">退出登录</li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"right\">\r\n      <div class=\"top-cr\">\r\n        <h2>修改角色</h2>\r\n      </div>\r\n      <div class=\"roleTable\">\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th style=\"width: 100px;\">头像</th>\r\n              <th style=\"width: 300px;\">名称</th>\r\n              <th style=\"width: 250px;\">描述</th>\r\n              <th style=\"width: 400px;\">操作</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(item, index1) in role_log\" :key=\"index1\">\r\n               <td v-for=\"(picture, index2) in pictures\" :key=\"index2\" v-show=\"index1 === index2\" class=\"imgWrapped\">\r\n                <img :src=\"picture\" alt=\"\">\r\n              </td>\r\n              <td>{{item.role_name}}</td>\r\n              <td>{{formatText(item.description) }}</td>\r\n              <td><button class='change' @click=\"modifyRole()\">修改角色</button>\r\n              <button class='uoload' @click=\"uploadFile()\" :disabled=\"!item.have_document_store\" :class=\"{ 'disabled-button': !item.have_document_store }\">上传资料</button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n\r\n        </table>  \r\n               <!-- <el-table :data=\"tableData\">\r\n                     <el-table-column prop=\"id\" label=\"ID\"></el-table-column>\r\n                      <el-table-column prop=\"name\" label=\"Name\"></el-table-column>\r\n                      <el-table-column label=\"Image\">\r\n                  <template slot-scope=\"scope\">\r\n                  <img :src=\"scope.row.imageUrl\" alt=\"Image\" style=\"width: 40px;height: 40px;border-radius: 50%;\">\r\n                 </template>\r\n                </el-table-column>\r\n                     </el-table> -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n  name: 'ChangeRole',\r\n  data() {\r\n        return {\r\n          role_log: [],\r\n          user_id: this.$route.query.user_id,\r\n          text: '的海外的合法大大覅哈哈爱上的人发放时aaa',\r\n          pictures: [], // 头像\r\n          role_id: [],\r\n          file: null, // 上传的AI资料\r\n          file_show: null\r\n        }\r\n      },\r\n   created () {\r\n    this.getInfo()\r\n  },\r\n   methods: {\r\n    modifyRole() {\r\n    this.$router.push({\r\n        path: '/ModifyRole',\r\n        query: {\r\n          user_id: this.user_id\r\n        }\r\n      })\r\n  },\r\n    formatText(text) {\r\n    if (text.length > 18) {\r\n    return `${text.slice(0, 18)}...`;\r\n    }\r\n    return text;\r\n  },\r\n    async getInfo () {\r\n      const res1 = await axios.get('http://119.39.26.68:5000/builtin_role_administrator/information/get_role_information', {\r\n        params: {\r\n          user_id: \"000000\"\r\n        }\r\n      })\r\n      // console.log(this.user_id);\r\n      // console.log(res1);\r\n      this.role_log = res1.data.data\r\n      console.log(this.role_log);\r\n      this.getPictures(this.role_log)\r\n  },\r\n\r\n  async getPictures (role_log) {\r\n      this.pictures = []\r\n      let length = role_log.length\r\n      for (let i = 0 ; i < length; i++) {\r\n        const res = await axios.get('http://119.39.26.68:5000/builtin_role_administrator/information/get_role_head_portrait', {\r\n          params: {\r\n            role_id: role_log[i].role_id,\r\n            user_id: \"000000\"\r\n          },\r\n          responseType: 'blob'\r\n        })\r\n        console.log(res)\r\n        const imgUrl = URL.createObjectURL(res.data)\r\n        this.pictures.push(imgUrl)\r\n        console.log(imgUrl);\r\n      }\r\n    },\r\n\r\n    uploadFile() {\r\n            // 创建一个 input[type=\"file\"] 元素\r\n            const input = document.createElement('input');\r\n             input.type = 'file';\r\n\r\n            // 添加 change 事件监听器\r\n                 input.addEventListener('change', (event) => {\r\n              const file = event.target.files[0];\r\n                 this.uploadToServer(file);\r\n                });\r\n\r\n          // 触发 input 元素的点击事件\r\n              input.click();\r\n                 },\r\n\r\n              uploadToServer(file) {\r\n              const formData = new FormData();\r\n              formData.append('file', file);\r\n              axios.post('/upload', formData, {\r\n                headers: {\r\n                   'Content-Type': 'multipart/form-data'\r\n              }\r\n            })\r\n             .then(response => {\r\n              // 处理上传成功的响应\r\n                 console.log(response.data);\r\n             })\r\n              .catch(error => {\r\n                 // 处理上传失败的错误\r\n                   console.error(error);\r\n                   });\r\n                      }\r\n}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrapped-cr {\r\n    display: flex;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #465069;\r\n    opacity: 0.9;\r\n  }\r\n\r\n  .left {\r\n    width: 90px;\r\n    /* height: 705px; */\r\n    height: 100%;\r\n    background-color: #D6ECFF;\r\n    border-radius: 10px 0 0 10px;\r\n  }\r\n\r\n  .leftText {\r\n    position: relative;\r\n    color: #9CBFFB;\r\n    font-weight: 700;\r\n    font-size: 18px;\r\n    text-align: center;\r\n  }\r\n\r\n  .leftText li {\r\n    width: 90px;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    border: 2px solid #9CBFFB;\r\n    border-radius: 10px;\r\n  }\r\n\r\n  .leftText li:hover {\r\n    background-color: #a0bff5;\r\n    color: #1990FF;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .leftText .one {\r\n    position: absolute;\r\n    top: 90px;\r\n    color: #1990FF;\r\n  }\r\n\r\n  .leftText .two {\r\n    position: absolute;\r\n    top: 250px;\r\n    color: #9CBFFB;\r\n  }\r\n\r\n  .leftText .three {\r\n    position: absolute;\r\n    top: 420px;\r\n  }\r\n\r\n  .right {\r\n    width: 1445px;\r\n    background-color: #f2f5f8;\r\n  }\r\n\r\n  .top-cr {\r\n    width: 100%;\r\n    height: 80px;\r\n    border: 1px solid #d3d4d6;\r\n  }\r\n\r\n  .top-cr h2 {\r\n    text-align: center;\r\n    line-height: 80px;\r\n  }\r\n \r\n  .roleTable {\r\n    margin-left: 20px;\r\n    max-height: 505px; \r\n    overflow-y: auto;\r\n  }\r\n  .roleTable table {\r\n    border-collapse: collapse;\r\n  }\r\n  \r\n  .roleTable th {\r\n    position: sticky;\r\n    top: 0;\r\n    background-color: #f2f2f2;\r\n    z-index: 1;\r\n  }\r\n\r\n  .roleTable th, td {\r\n    text-align: center;\r\n    width: 330px;\r\n    height: 50px;\r\n    border: 1px solid #BBBBBB;\r\n  }\r\n  \r\n   .roleTable .imgWrapped img {\r\n   /* position: absolute; */\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n  }\r\n  \r\n  .roleTable .upload {\r\n     width: 90px;\r\n    height: 30px;\r\n    background-color: #9CBFFB;\r\n    margin-right: 30px;\r\n    border: none;\r\n  }\r\n  \r\n  .roleTable .change {\r\n    width: 90px;\r\n    height: 30px;\r\n    color: white;\r\n    background-color: #409eff;\r\n    border: none;\r\n  }\r\n\r\n  .roleTable .uoload {\r\n    margin-left: 20px;\r\n    width: 90px;\r\n    height: 30px;\r\n    color: white;\r\n    background-color: #67c23a;\r\n    border: none;\r\n  }\r\n  \r\n  .roleTable button:hover {\r\n    opacity: 0.7;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .disabled-button {\r\n    margin-left: 20px;\r\n    width: 90px;\r\n    height: 30px;\r\n    color: white;\r\n    background-color: #67c23a;\r\n    border: none;\r\n    opacity: 0.3;\r\n    pointer-events: none; /* 禁用按钮的交互 */\r\n  }\r\n  \r\n\r\n</style>"],"mappings":";;;;AAoDA,OAAAA,KAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,OAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,OAAA;MACAG,IAAA;MACAC,QAAA;MAAA;MACAC,OAAA;MACAC,IAAA;MAAA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,OAAA;EACA;EACAC,OAAA;IACAC,WAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QACAC,IAAA;QACAZ,KAAA;UACAF,OAAA,OAAAA;QACA;MACA;IACA;IACAe,WAAAZ,IAAA;MACA,IAAAA,IAAA,CAAAa,MAAA;QACA,UAAAb,IAAA,CAAAc,KAAA;MACA;MACA,OAAAd,IAAA;IACA;IACA,MAAAM,QAAA;MACA,MAAAS,IAAA,SAAAtB,KAAA,CAAAuB,GAAA;QACAC,MAAA;UACApB,OAAA;QACA;MACA;MACA;MACA;MACA,KAAAD,QAAA,GAAAmB,IAAA,CAAApB,IAAA,CAAAA,IAAA;MACAuB,OAAA,CAAAC,GAAA,MAAAvB,QAAA;MACA,KAAAwB,WAAA,MAAAxB,QAAA;IACA;IAEA,MAAAwB,YAAAxB,QAAA;MACA,KAAAK,QAAA;MACA,IAAAY,MAAA,GAAAjB,QAAA,CAAAiB,MAAA;MACA,SAAAQ,CAAA,MAAAA,CAAA,GAAAR,MAAA,EAAAQ,CAAA;QACA,MAAAC,GAAA,SAAA7B,KAAA,CAAAuB,GAAA;UACAC,MAAA;YACAf,OAAA,EAAAN,QAAA,CAAAyB,CAAA,EAAAnB,OAAA;YACAL,OAAA;UACA;UACA0B,YAAA;QACA;QACAL,OAAA,CAAAC,GAAA,CAAAG,GAAA;QACA,MAAAE,MAAA,GAAAC,GAAA,CAAAC,eAAA,CAAAJ,GAAA,CAAA3B,IAAA;QACA,KAAAM,QAAA,CAAAS,IAAA,CAAAc,MAAA;QACAN,OAAA,CAAAC,GAAA,CAAAK,MAAA;MACA;IACA;IAEAG,WAAA;MACA;MACA,MAAAC,KAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,KAAA,CAAAG,IAAA;;MAEA;MACAH,KAAA,CAAAI,gBAAA,WAAAC,KAAA;QACA,MAAA9B,IAAA,GAAA8B,KAAA,CAAAC,MAAA,CAAAC,KAAA;QACA,KAAAC,cAAA,CAAAjC,IAAA;MACA;;MAEA;MACAyB,KAAA,CAAAS,KAAA;IACA;IAEAD,eAAAjC,IAAA;MACA,MAAAmC,QAAA,OAAAC,QAAA;MACAD,QAAA,CAAAE,MAAA,SAAArC,IAAA;MACAV,KAAA,CAAAgD,IAAA,YAAAH,QAAA;QACAI,OAAA;UACA;QACA;MACA,GACAC,IAAA,CAAAC,QAAA;QACA;QACA1B,OAAA,CAAAC,GAAA,CAAAyB,QAAA,CAAAjD,IAAA;MACA,GACAkD,KAAA,CAAAC,KAAA;QACA;QACA5B,OAAA,CAAA4B,KAAA,CAAAA,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}