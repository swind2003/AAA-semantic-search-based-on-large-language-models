{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  name: 'CreateInnerRoles',\n  data() {\n    return {\n      user_id: '000000',\n      isModify: false,\n      prompt: '',\n      // 提示词\n      role_name: '',\n      // 角色名称\n      description: '',\n      // 角色描述\n      picture_get: '',\n      // 获取上传的头像图片\n      picture_show: '',\n      // 展示上传的头像图片\n      file_get: '',\n      // 上传的AI资料\n      file_show: ''\n    };\n  },\n  methods: {\n    triggerPictureInput() {\n      this.$refs.pictureInput.click();\n    },\n    handlePictureChange(event) {\n      const picture_temp = event.target.files[0];\n      if (picture_temp && picture_temp.type.startsWith('image/')) {\n        this.picture_get = picture_temp;\n        this.picture_show = URL.createObjectURL(this.picture_get);\n        this.isModify = true;\n      } else {\n        alert('请选择图片文件');\n        event.target.value = null;\n      }\n    },\n    triggerFileInput() {\n      this.$refs.fileInput.click();\n    },\n    handleFileChange(event) {\n      this.file_get = event.target.files[0];\n      this.file_show = this.file_get ? this.file_get.name : null;\n    },\n    async create() {\n      if (this.prompt.trim() === '') {\n        alert('请输入提示词！');\n        return;\n      } else if (this.picture_show === '') {\n        alert(`请上传角色头像！`);\n        return;\n      } else if (this.role_name.trim() === '') {\n        alert(`请输入角色名称！`);\n        return;\n      } else if (this.description.trim() === '') {\n        alert(`请输入角色描述！`);\n        return;\n      } else if (this.file_show === '') {\n        alert(`请上传资料！`);\n        return;\n      }\n      let file = new FormData();\n      file.append('user_id', this.user_id);\n      file.append('role_name', this.role_name);\n      file.append('description', this.description);\n      file.append('prompt', this.prompt);\n      file.append('head_portrait', this.picture_get);\n      file.append('files', this.file_get);\n      const res = await axios.post('http://119.39.26.149:5000//builtin_role_administrator/create_builtin_role', file);\n      console.log(res);\n      if (res.data.code === '200') {\n        alert(`创建成功！`);\n      } else {\n        alert(`创建失败！`);\n      }\n      this.role_name = '';\n      this.description = '';\n      this.prompt = '';\n      this.picture_get = null, this.picture_show = null, this.file_get = null, this.file_show = null;\n      this.isModify = false;\n    },\n    toChat() {\n      this.$router.push({\n        path: '/chatInterface',\n        query: {\n          user_id: this.user_id\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","user_id","isModify","prompt","role_name","description","picture_get","picture_show","file_get","file_show","methods","triggerPictureInput","$refs","pictureInput","click","handlePictureChange","event","picture_temp","target","files","type","startsWith","URL","createObjectURL","alert","value","triggerFileInput","fileInput","handleFileChange","create","trim","file","FormData","append","res","post","console","log","code","toChat","$router","push","path","query"],"sources":["src/views/CreateInnerRoles.vue"],"sourcesContent":["<template>\r\n  <div class=\"wrapped-cr\">\r\n    <div class=\"left\">\r\n      <ul class=\"leftText\">\r\n        <li class=\"one\">修改角色</li>\r\n        <li class=\"two\">新增角色</li>\r\n        <li class=\"three\" @click=\"exit()\">退出登录</li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"right\">\r\n      <div class=\"main\">\r\n        <div class=\"title\">创建角色</div>\r\n        <div class=\"prompt\">提示词</div>\r\n        <textarea v-model=\"prompt\" name=\"\" id=\"\" cols=\"30\" rows=\"10\" placeholder=\"    我想要让你作为一位杰出的律师。您将在法律领域展现您的才能，为人们提供准确、明晰的法律建议。您可以选择专攻领域，如刑法、民法、商法等，但您的目标是成为一位擅长处理各类法律问题、具备卓越法律洞察力的律师。\"></textarea>\r\n        <input ref=\"pictureInput\" type=\"file\" style=\"display: none;\" @change=\"handlePictureChange\">\r\n        <div class=\"head_text\">角色头像：</div>\r\n        <div v-show=\"!isModify\" @click=\"triggerPictureInput()\" class=\"head_picture\">＋</div>\r\n        <div v-show=\"isModify\" @click=\"triggerPictureInput()\" class=\"show_picture\">\r\n          <img :src=\"picture_show\" alt=\"\">\r\n        </div>\r\n        <div class=\"name\">角色名称：</div>\r\n        <input v-model=\"role_name\" type=\"text\" placeholder=\"请输入角色名称\" class=\"nameInput\">\r\n        <div class=\"describe\">角色描述：</div>\r\n        <input v-model=\"description\" type=\"text\" placeholder=\"请输入对创建角色的描述\" class=\"describeInput\">\r\n        <div class=\"divergence\">发散能力：</div>\r\n        <select name=\"\" id=\"\" class=\"divergenceSelect\">\r\n          <option selected disabled>1.0</option>\r\n        </select>\r\n        <div class=\"model\">使用模型：</div>\r\n        <select name=\"\" id=\"\" class=\"modelSelect\">\r\n          <option selected disabled>ChatGpt3.5</option>\r\n        </select>\r\n        <div class=\"AI\">AI资料库：</div>\r\n        <input ref=\"fileInput\" type=\"file\" style=\"display: none;\" @change=\"handleFileChange\">\r\n        <button @click=\"triggerFileInput()\" class=\"AIupload\">上传资料</button>\r\n        <button @click=\"create()\" class=\"create\">创建角色</button>\r\n        <div class=\"show_file\">{{ file_show }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n  name: 'CreateInnerRoles',\r\n  data () {\r\n    return {\r\n      user_id: '000000',\r\n      isModify: false,\r\n      prompt: '', // 提示词\r\n      role_name: '', // 角色名称\r\n      description: '', // 角色描述\r\n      picture_get: '', // 获取上传的头像图片\r\n      picture_show: '', // 展示上传的头像图片\r\n      file_get: '', // 上传的AI资料\r\n      file_show: ''\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    triggerPictureInput () {\r\n      this.$refs.pictureInput.click()\r\n    },\r\n    handlePictureChange (event) {\r\n      const picture_temp = event.target.files[0]\r\n      if (picture_temp && picture_temp.type.startsWith('image/')) {\r\n        this.picture_get = picture_temp\r\n        this.picture_show = URL.createObjectURL(this.picture_get)\r\n        this.isModify = true\r\n      } else {\r\n        alert('请选择图片文件')\r\n        event.target.value = null\r\n      }\r\n    },\r\n    triggerFileInput () {\r\n      this.$refs.fileInput.click()\r\n    },\r\n    handleFileChange (event) {\r\n      this.file_get = event.target.files[0]\r\n      this.file_show = this.file_get ? this.file_get.name : null\r\n    },\r\n    async create () {\r\n      if (this.prompt.trim() === '') {\r\n        alert('请输入提示词！')\r\n        return\r\n      } else if (this.picture_show === '') {\r\n        alert(`请上传角色头像！`)\r\n        return\r\n      } else if (this.role_name.trim() === '') {\r\n        alert(`请输入角色名称！`)\r\n        return\r\n      } else if (this.description.trim() === '') {\r\n        alert(`请输入角色描述！`)\r\n        return\r\n      } else if (this.file_show === '') {\r\n        alert(`请上传资料！`)\r\n        return\r\n      }\r\n      let file = new FormData()\r\n      file.append('user_id', this.user_id)\r\n      file.append('role_name', this.role_name)\r\n      file.append('description', this.description)\r\n      file.append('prompt', this.prompt)\r\n      file.append('head_portrait', this.picture_get)\r\n      file.append('files', this.file_get)\r\n      const res = await axios.post('http://119.39.26.149:5000//builtin_role_administrator/create_builtin_role',file)\r\n      console.log(res)\r\n      if (res.data.code === '200') {\r\n        alert(`创建成功！`)\r\n      } else {\r\n        alert(`创建失败！`)\r\n      }\r\n      this.role_name = ''\r\n      this.description = ''\r\n      this.prompt = ''\r\n      this.picture_get = null,\r\n      this.picture_show = null,\r\n      this.file_get = null,\r\n      this.file_show = null\r\n      this.isModify = false\r\n    },\r\n    toChat () {\r\n      this.$router.push({\r\n        path: '/chatInterface',\r\n        query: {\r\n          user_id: this.user_id\r\n        }\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrapped-cr {\r\n    display: flex;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #465069;\r\n    opacity: 0.9;\r\n  }\r\n\r\n  .left {\r\n    width: 90px;\r\n    /* height: 705px; */\r\n    height: 100%;\r\n    background-color: #D6ECFF;\r\n    border-radius: 10px 0 0 10px;\r\n  }\r\n\r\n  .leftText {\r\n    position: relative;\r\n    color: #9CBFFB;\r\n    font-weight: 700;\r\n    font-size: 18px;\r\n    text-align: center;\r\n  }\r\n\r\n  .leftText li {\r\n    width: 90px;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    border: 2px solid #9CBFFB;\r\n    border-radius: 10px;\r\n  }\r\n\r\n  .leftText li:hover {\r\n    background-color: #a0bff5;\r\n    color: #1990FF;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .leftText .one {\r\n    position: absolute;\r\n    top: 90px;\r\n    color: #9CBFFB;\r\n  }\r\n\r\n  .leftText .two {\r\n    position: absolute;\r\n    top: 250px;\r\n    color: #1990FF;\r\n  }\r\n\r\n  .leftText .three {\r\n    position: absolute;\r\n    top: 420px;\r\n  }\r\n\r\n  .right {\r\n    position: relative;\r\n    width: 1450px;\r\n    background-color: #F2F5F8;\r\n    background-image: url('../assets/createRoles.png');\r\n    /* background-repeat: no-repeat; */\r\n    background-size: 1450px 920px;\r\n  }\r\n\r\n  .right .main {\r\n    position: relative;\r\n    width: 700px;\r\n    height: 100%;\r\n    background-color: #fff;\r\n    border: 1px solid #BBB;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  .right .title {\r\n    width: 700px;\r\n    height: 40px;\r\n    border-bottom: 1px solid #BBB;\r\n    font-size: 17px;\r\n    line-height: 40px;\r\n    text-align: center;\r\n    font-weight: 700;\r\n  }\r\n\r\n  .right .prompt {\r\n    position: absolute;\r\n    left: 70px;\r\n    top: 70px;\r\n    font-size: 17px;\r\n    font-weight: 700;\r\n    z-index: 99;\r\n  }\r\n  .right textarea {\r\n    position: absolute;\r\n    left: 60px;\r\n    top: 65px;\r\n    width: 580px;\r\n    height: 200px;\r\n    background-color: #fff;\r\n    border: 1px solid #809CFF;\r\n    border-radius: 15px;\r\n    padding: 10px;\r\n    font-size: 18px;\r\n    resize: none;\r\n    padding-top: 35px;\r\n  }\r\n\r\n  .right .head_text {\r\n    position: relative;\r\n    font-size: 17px;\r\n    font-weight: 700;\r\n    top: 280px;\r\n    left: 60px;\r\n  }\r\n\r\n  .right .head_picture {\r\n    position: absolute;\r\n    top: 290px;\r\n    left: 150px;\r\n    width: 90px;\r\n    height: 90px;\r\n    background-color: #fff;\r\n    border: 2px dashed #BBB;\r\n    border-radius: 10px;\r\n    color: #BBB;\r\n    font-size: 40px;\r\n    line-height: 75px;\r\n    text-align: center;\r\n  }\r\n\r\n  .right .head_picture:hover {\r\n    cursor: pointer;\r\n    opacity: 0.7;\r\n  }\r\n\r\n  .right .name {\r\n    position: absolute;\r\n    font-size: 17px;\r\n    font-weight: 700;\r\n    left: 60px;\r\n    top: 410px;\r\n  }\r\n  \r\n  .right .nameInput {\r\n    position: absolute;\r\n    font-size: 16px;\r\n    left: 150px;\r\n    top: 410px;\r\n    width: 400px;\r\n    height: 27px;\r\n    padding: 2px;\r\n  }\r\n\r\n  .right .describe {\r\n    position: absolute;\r\n    font-size: 17px;\r\n    font-weight: 700;\r\n    left: 60px;\r\n    top: 460px;\r\n  }\r\n\r\n  .right .describeInput {\r\n    position: absolute;\r\n    font-size: 16px;\r\n    left: 150px;\r\n    top: 460px;\r\n    width: 400px;\r\n    height: 27px;\r\n    padding: 2px;\r\n  }\r\n\r\n  .right .divergence {\r\n    position: absolute;\r\n    font-size: 17px;\r\n    font-weight: 700;\r\n    left: 60px;\r\n    top: 510px;\r\n  }\r\n\r\n  .right .divergenceSelect {\r\n    position: absolute;\r\n    font-size: 16px;\r\n    left: 150px;\r\n    top: 510px;\r\n    width: 120px;\r\n    height: 27px;\r\n    padding: 2px;\r\n  }\r\n\r\n  .right .model {\r\n    position: absolute;\r\n    font-size: 17px;\r\n    font-weight: 700;\r\n    left: 60px;\r\n    top: 560px;\r\n  }\r\n\r\n  .right .modelSelect {\r\n    position: absolute;\r\n    font-size: 16px;\r\n    left: 150px;\r\n    top: 560px;\r\n    width: 120px;\r\n    height: 27px;\r\n    padding: 2px;\r\n  }\r\n\r\n  .right .AI {\r\n    position: absolute;\r\n    font-size: 17px;\r\n    font-weight: 700;\r\n    left: 60px;\r\n    top: 620px;\r\n  }\r\n\r\n  .right .AIupload {\r\n    position: absolute;\r\n    font-size: 16px;\r\n    left: 150px;\r\n    top: 610px;\r\n    width: 100px;\r\n    height: 40px;\r\n    padding: 2px;\r\n    background-color: #3182ce;\r\n    color: #fff;\r\n    border: none;\r\n    border-radius: 10px;\r\n  }\r\n\r\n  .right .AIupload:hover {\r\n    cursor: pointer;\r\n    opacity: 0.7;\r\n  }\r\n\r\n  .right .create {\r\n    position: absolute;\r\n    font-size: 17px;\r\n    left: 100px;\r\n    bottom: 20px;\r\n    width: 500px;\r\n    height: 40px;\r\n    background-color: #3182ce;\r\n    color: #fff;\r\n    border: none;\r\n    border-radius: 7px;\r\n  }\r\n\r\n  .right .create:hover {\r\n    cursor: pointer;\r\n    opacity: 0.7;\r\n  }\r\n\r\n  .right .show_picture img {\r\n    position: absolute;\r\n    top: 290px;\r\n    left: 150px;\r\n    width: 90px;\r\n    height: 90px;\r\n    border-radius: 50%;\r\n  }\r\n\r\n  .right .show_picture img:hover {\r\n    cursor: pointer;\r\n    opacity: 0.7;\r\n  }\r\n\r\n  .right .show_file {\r\n    position: absolute;\r\n    left: 260px;\r\n    top: 620px;\r\n  }\r\n</style>"],"mappings":";;;;AA2CA,OAAAA,KAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,QAAA;MACAC,MAAA;MAAA;MACAC,SAAA;MAAA;MACAC,WAAA;MAAA;MACAC,WAAA;MAAA;MACAC,YAAA;MAAA;MACAC,QAAA;MAAA;MACAC,SAAA;IACA;EACA;EAEAC,OAAA;IACAC,oBAAA;MACA,KAAAC,KAAA,CAAAC,YAAA,CAAAC,KAAA;IACA;IACAC,oBAAAC,KAAA;MACA,MAAAC,YAAA,GAAAD,KAAA,CAAAE,MAAA,CAAAC,KAAA;MACA,IAAAF,YAAA,IAAAA,YAAA,CAAAG,IAAA,CAAAC,UAAA;QACA,KAAAf,WAAA,GAAAW,YAAA;QACA,KAAAV,YAAA,GAAAe,GAAA,CAAAC,eAAA,MAAAjB,WAAA;QACA,KAAAJ,QAAA;MACA;QACAsB,KAAA;QACAR,KAAA,CAAAE,MAAA,CAAAO,KAAA;MACA;IACA;IACAC,iBAAA;MACA,KAAAd,KAAA,CAAAe,SAAA,CAAAb,KAAA;IACA;IACAc,iBAAAZ,KAAA;MACA,KAAAR,QAAA,GAAAQ,KAAA,CAAAE,MAAA,CAAAC,KAAA;MACA,KAAAV,SAAA,QAAAD,QAAA,QAAAA,QAAA,CAAAT,IAAA;IACA;IACA,MAAA8B,OAAA;MACA,SAAA1B,MAAA,CAAA2B,IAAA;QACAN,KAAA;QACA;MACA,gBAAAjB,YAAA;QACAiB,KAAA;QACA;MACA,gBAAApB,SAAA,CAAA0B,IAAA;QACAN,KAAA;QACA;MACA,gBAAAnB,WAAA,CAAAyB,IAAA;QACAN,KAAA;QACA;MACA,gBAAAf,SAAA;QACAe,KAAA;QACA;MACA;MACA,IAAAO,IAAA,OAAAC,QAAA;MACAD,IAAA,CAAAE,MAAA,iBAAAhC,OAAA;MACA8B,IAAA,CAAAE,MAAA,mBAAA7B,SAAA;MACA2B,IAAA,CAAAE,MAAA,qBAAA5B,WAAA;MACA0B,IAAA,CAAAE,MAAA,gBAAA9B,MAAA;MACA4B,IAAA,CAAAE,MAAA,uBAAA3B,WAAA;MACAyB,IAAA,CAAAE,MAAA,eAAAzB,QAAA;MACA,MAAA0B,GAAA,SAAApC,KAAA,CAAAqC,IAAA,8EAAAJ,IAAA;MACAK,OAAA,CAAAC,GAAA,CAAAH,GAAA;MACA,IAAAA,GAAA,CAAAlC,IAAA,CAAAsC,IAAA;QACAd,KAAA;MACA;QACAA,KAAA;MACA;MACA,KAAApB,SAAA;MACA,KAAAC,WAAA;MACA,KAAAF,MAAA;MACA,KAAAG,WAAA,SACA,KAAAC,YAAA,SACA,KAAAC,QAAA,SACA,KAAAC,SAAA;MACA,KAAAP,QAAA;IACA;IACAqC,OAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QACAC,IAAA;QACAC,KAAA;UACA1C,OAAA,OAAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}