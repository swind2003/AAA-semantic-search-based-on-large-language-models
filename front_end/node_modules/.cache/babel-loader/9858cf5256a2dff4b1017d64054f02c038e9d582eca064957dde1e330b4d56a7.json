{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport axios from 'axios';\nexport default {\n  name: 'SetInformation',\n  data() {\n    return {\n      noModify: true,\n      contact_way: '',\n      // 联系我们编辑\n      user_agreement: '',\n      // 用户须知编辑\n      contact_way_show: '',\n      // 联系我们展示\n      user_agreement_show: '',\n      // 用户须知展示\n      picture_temp: null,\n      // 暂时存储广告图片url\n      picture_show: null,\n      // 展示广告图片url\n      picture_get: null,\n      // 获取上传的广告图片\n      picture_name: '',\n      // 显示上传图片名称\n      link: '',\n      // 广告链接编辑\n      link_show: '' // 广告链接展示\n    };\n  },\n\n  created() {\n    this.getInfo();\n  },\n  methods: {\n    manageUsers() {\n      this.$router.push('/manageUsers');\n    },\n    seeInfo() {\n      this.$router.push('/seeInformation');\n    },\n    feedback() {\n      this.$router.push('/seeFeedBack');\n    },\n    edit() {\n      this.contact_way = this.contact_way_show;\n      this.user_agreement = this.user_agreement_show;\n      this.picture_name = this.picture_name_show;\n      this.link = this.link_show;\n      this.noModify = false;\n      console.log('edit');\n    },\n    async getInfo() {\n      const res1 = await axios.get('http://119.39.26.149:5000/administrator/get_company_info');\n      console.log(res1);\n      this.contact_way_show = res1.data.data.contact_way;\n      this.user_agreement_show = res1.data.data.user_agreement;\n      const res2 = await axios.get('http://119.39.26.149:5000/administrator/get_old_advertise', {\n        params: {},\n        responseType: 'blob'\n      });\n      if (res2.data.code === '400') {\n        alert('获取图片失败');\n        return;\n      }\n      const imgUrl = URL.createObjectURL(res2.data);\n      this.picture_temp = imgUrl;\n      const res3 = await axios.get('http://119.39.26.149:5000/administrator/get_url_link');\n      if (res3.data.code === '400') {\n        alert('上传链接错误');\n        return;\n      }\n      this.link_show = res3.data.data.url;\n      console.log(res3);\n    },\n    seePicture() {\n      this.picture_show = this.picture_temp;\n    },\n    closePic() {\n      this.picture_show = null;\n    },\n    triggerPictureInput() {\n      this.$refs.pictureInput.click();\n    },\n    handlePictureChange(event) {\n      const picture_temp = event.target.files[0];\n      if (picture_temp && picture_temp.type.startsWith('image/')) {\n        this.picture_get = picture_temp;\n        this.picture_name = this.picture_get.name;\n      } else {\n        alert('请选择图片文件');\n        event.target.value = null;\n      }\n    },\n    cancel() {\n      this.noModify = true;\n    },\n    async chess() {\n      const res1 = await axios.post('http://119.39.26.149:5000/administrator/set_company_info', {\n        contact_way: this.contact_way,\n        user_agreement: this.user_agreement\n      });\n      if (res1.data.code === '400') {\n        alert('上传信息错误');\n        return;\n      }\n      this.contact_way_show = this.contact_way;\n      this.user_agreement_show = this.user_agreement;\n      if (this.picture_get !== null) {\n        let picture = new FormData();\n        picture.append('advertise', this.picture_get);\n        const res2 = await axios.post('http://119.39.26.149:5000/administrator/set_advertising', picture);\n        if (res2.data.code === '400') {\n          alert('上传图片错误');\n          return;\n        }\n        this.picture_temp = URL.createObjectURL(this.picture_get);\n        this.picture_get = null;\n      }\n      const res3 = await axios.post('http://119.39.26.149:5000/administrator/change_url_link', {\n        url: this.link\n      });\n      if (res3.data.code === '400') {\n        alert('上传链接错误');\n        return;\n      }\n      this.link_show = this.link;\n      this.noModify = !this.noModify;\n      alert('设置成功！');\n    },\n    exit() {\n      this.$router.push('/login_system');\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","noModify","contact_way","user_agreement","contact_way_show","user_agreement_show","picture_temp","picture_show","picture_get","picture_name","link","link_show","created","getInfo","methods","manageUsers","$router","push","seeInfo","feedback","edit","picture_name_show","console","log","res1","get","res2","params","responseType","code","alert","imgUrl","URL","createObjectURL","res3","url","seePicture","closePic","triggerPictureInput","$refs","pictureInput","click","handlePictureChange","event","target","files","type","startsWith","value","cancel","chess","post","picture","FormData","append","exit"],"sources":["src/views/SetInformation.vue"],"sourcesContent":["<template>\r\n  <div class=\"wrapped\">\r\n    <div class=\"left\">\r\n      <ul class=\"leftText\">\r\n        <li class=\"one\">信息设置</li>\r\n        <li @click=\"manageUsers()\" class=\"two\">用户管理</li>\r\n        <li @click=\"seeInfo()\" class=\"three\">查看信息</li>\r\n        <li @click=\"feedback()\" class=\"four\">用户反馈</li>\r\n        <li class=\"five\" @click=\"exit\">退出登录</li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"right\">\r\n      <div v-if=\"noModify\" class=\"display\">\r\n        <h2>信息设置</h2>\r\n        <div class=\"contactUs\">\r\n          <span class=\"contactUsLeft\">“联系我们”：</span>\r\n          <span>{{ contact_way_show }}</span>\r\n        </div>\r\n        <div class=\"userMustKnow\">\r\n          <span>“用户须知”：</span>\r\n          <textarea v-model=\"user_agreement_show\" disabled></textarea>\r\n        </div>\r\n        <div class=\"advertisement\">\r\n          <span>广告图片：</span>\r\n          <button @click=\"seePicture()\" class=\"seePicture\">查看图片</button>\r\n        </div>\r\n        <div class=\"jump\">\r\n          <span>广告链接：</span>\r\n          <span class=\"link\">{{ link_show }}</span>\r\n        </div>\r\n        <div class=\"edit\" @click=\"edit()\">编辑</div>\r\n        <div class=\"picture\" v-show=\"picture_show !== null\">\r\n          <img :src=\"picture_show\" alt=\"\">\r\n          <div @click=\"closePic()\" class=\"closePic\">❎</div>\r\n        </div>\r\n      </div>\r\n      <div v-else class=\"modifying\">\r\n        <h2>信息设置</h2>\r\n        <div class=\"contactUs\">\r\n          <span class=\"contactUsLeft\">“联系我们”内容设置：</span>\r\n          <input v-model=\"contact_way\" type=\"text\" name=\"\" id=\"\">\r\n        </div>\r\n        <div class=\"userMustKnow\">\r\n          <span>“用户须知”内容设置：</span>\r\n          <textarea v-model=\"user_agreement\"></textarea>\r\n        </div>\r\n        <div class=\"advertisement\">\r\n          <span>广告图片设置：</span>\r\n          <input ref=\"pictureInput\" type=\"file\" style=\"display: none;\" name=\"image\" accept=\"image/*\" @change=\"handlePictureChange\">\r\n          <button @click=\"triggerPictureInput()\" class=\"upload\">上传图片</button>\r\n          <span>{{ picture_name }}</span>\r\n        </div>\r\n        <div class=\"jump\">\r\n          <span>广告链接设置：</span>\r\n          <input v-model=\"link\" type=\"text\">\r\n        </div>\r\n        <div class=\"cancel\" @click=\"cancel()\">取消</div>\r\n        <div class=\"chess\" @click=\"chess()\">确定</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n  name: 'SetInformation',\r\n  data () {\r\n    return {\r\n      noModify: true,\r\n      contact_way: '', // 联系我们编辑\r\n      user_agreement: '', // 用户须知编辑\r\n      contact_way_show: '', // 联系我们展示\r\n      user_agreement_show: '', // 用户须知展示\r\n      picture_temp: null, // 暂时存储广告图片url\r\n      picture_show: null, // 展示广告图片url\r\n      picture_get: null, // 获取上传的广告图片\r\n      picture_name: '', // 显示上传图片名称\r\n      link: '', // 广告链接编辑\r\n      link_show: '', // 广告链接展示\r\n    }\r\n  },\r\n\r\n  created () {\r\n    this.getInfo()\r\n  },\r\n\r\n  methods: {\r\n    manageUsers () {\r\n      this.$router.push('/manageUsers')\r\n    },\r\n    seeInfo () {\r\n      this.$router.push('/seeInformation')\r\n    },\r\n    feedback () {\r\n      this.$router.push('/seeFeedBack')\r\n    },\r\n    edit () {\r\n      this.contact_way = this.contact_way_show\r\n      this.user_agreement = this.user_agreement_show\r\n      this.picture_name = this.picture_name_show\r\n      this.link = this.link_show\r\n      this.noModify = false\r\n      console.log('edit')\r\n    },\r\n    async getInfo () {\r\n      const res1 = await axios.get('http://119.39.26.149:5000/administrator/get_company_info')\r\n      console.log(res1)\r\n      this.contact_way_show = res1.data.data.contact_way\r\n      this.user_agreement_show = res1.data.data.user_agreement\r\n\r\n      const res2 = await axios.get('http://119.39.26.149:5000/administrator/get_old_advertise', {\r\n        params: {\r\n\r\n        },\r\n        responseType: 'blob'\r\n      })\r\n      if (res2.data.code === '400') {\r\n          alert('获取图片失败')\r\n          return\r\n        }\r\n      const imgUrl = URL.createObjectURL(res2.data)\r\n      this.picture_temp = imgUrl\r\n\r\n      const res3 = await axios.get('http://119.39.26.149:5000/administrator/get_url_link')\r\n      if (res3.data.code === '400') {\r\n        alert('上传链接错误')\r\n        return\r\n      }\r\n      this.link_show = res3.data.data.url\r\n      console.log(res3)\r\n    },\r\n    seePicture () {\r\n      this.picture_show = this.picture_temp\r\n    },\r\n    closePic () {\r\n      this.picture_show = null\r\n    },\r\n    triggerPictureInput () {\r\n      this.$refs.pictureInput.click()\r\n    },\r\n    handlePictureChange (event) {\r\n      const picture_temp = event.target.files[0]\r\n      if (picture_temp && picture_temp.type.startsWith('image/')) {\r\n        this.picture_get = picture_temp\r\n        this.picture_name = this.picture_get.name\r\n      } else {\r\n        alert('请选择图片文件')\r\n        event.target.value = null\r\n      }\r\n    },\r\n    cancel () {\r\n      this.noModify = true\r\n    },\r\n    async chess () {\r\n      const res1 = await axios.post('http://119.39.26.149:5000/administrator/set_company_info', {\r\n        contact_way: this.contact_way,\r\n        user_agreement: this.user_agreement\r\n      })\r\n      if (res1.data.code === '400') {\r\n        alert('上传信息错误')\r\n        return\r\n      }\r\n      this.contact_way_show = this.contact_way\r\n      this.user_agreement_show = this.user_agreement\r\n\r\n      if (this.picture_get !== null) {\r\n        let picture = new FormData()\r\n        picture.append('advertise', this.picture_get)\r\n        const res2 = await axios.post('http://119.39.26.149:5000/administrator/set_advertising', picture)\r\n        if (res2.data.code === '400') {\r\n          alert('上传图片错误')\r\n          return\r\n        }\r\n        this.picture_temp = URL.createObjectURL(this.picture_get)\r\n        this.picture_get = null\r\n      }\r\n\r\n      const res3 = await axios.post('http://119.39.26.149:5000/administrator/change_url_link', {\r\n        url: this.link\r\n      })\r\n      if (res3.data.code === '400') {\r\n        alert('上传链接错误')\r\n        return\r\n      }\r\n      this.link_show = this.link\r\n\r\n      this.noModify = !this.noModify\r\n      alert('设置成功！')\r\n    },\r\n    exit () {\r\n      this.$router.push('/login_system')\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .wrapped {\r\n    display: flex;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #465069;\r\n    opacity: 0.9;\r\n  }\r\n\r\n  .left {\r\n    width: 90px;\r\n    height: 100%;\r\n    background-color: #D6ECFF;\r\n    border-radius: 10px 0 0 10px;\r\n  }\r\n\r\n  .leftText {\r\n    position: relative;\r\n    color: #9CBFFB;\r\n    font-weight: 700;\r\n    font-size: 18px;\r\n    text-align: center;\r\n  }\r\n\r\n  .leftText li {\r\n    width: 90px;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    border: 2px solid #9CBFFB;\r\n    border-radius: 10px;\r\n  }\r\n\r\n  .leftText li:hover {\r\n    background-color: #a0bff5;\r\n    color: #1990FF;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .leftText .one {\r\n    position: absolute;\r\n    top: 90px;\r\n    color: #1990FF;\r\n  }\r\n\r\n  .leftText .two {\r\n    position: absolute;\r\n    top: 210px;\r\n  }\r\n\r\n  .leftText .three {\r\n    position: absolute;\r\n    top: 330px;\r\n  }\r\n\r\n  .leftText .four {\r\n    position: absolute;\r\n    top: 450px;\r\n  }\r\n\r\n  .leftText .five {\r\n    position: absolute;\r\n    top: 570px;\r\n  }\r\n\r\n  .right {\r\n    width: 1450px;\r\n    background-color: #F2F5F8;\r\n  }\r\n\r\n  .right h2 {\r\n    width: 1400px;\r\n    height: 70px;\r\n    text-align: center;\r\n    line-height: 70px;\r\n    margin: 0 auto;\r\n    border-bottom: 1px solid #BBBBBB;\r\n  }\r\n\r\n  .right .display {\r\n    position: relative;\r\n    font-size: 18px;\r\n  }\r\n\r\n  .contactUs {\r\n    position: absolute;\r\n    left: 30px;\r\n    top: 120px;\r\n  }\r\n\r\n  .contactUsLeft {\r\n    padding-right: 40px;\r\n  }\r\n\r\n  .userMustKnow {\r\n    display: flex;\r\n    position: absolute;\r\n    left: 30px;\r\n    top: 190px;\r\n  }\r\n\r\n  .userMustKnow span {\r\n    padding-right: 40px;\r\n  }\r\n\r\n  .userMustKnow textarea {\r\n    width: 1000px;\r\n    height: 400px;\r\n    background-color: #fff;\r\n    border-radius: 15px;\r\n    padding: 10px;\r\n    font-size: 18px;\r\n    resize: none;\r\n  }\r\n\r\n  .display .edit {\r\n    position: absolute;\r\n    top: 100px;\r\n    right: 100px;\r\n    width: 100px;\r\n    height: 50px;\r\n    border-radius: 6px;\r\n    border: 2px solid skyblue;\r\n    line-height: 50px;\r\n    text-align: center;\r\n    font-size: 20px;\r\n    color: #1990FF;\r\n    font-weight: 700;\r\n  }\r\n\r\n  .display .edit:hover {\r\n    background-color: #D6ECFF;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .right .modifying {\r\n    position: relative;\r\n    font-size: 18px;\r\n  }\r\n\r\n  .contactUs input {\r\n    width: 300px;\r\n    height: 30px;\r\n    padding: 5px;\r\n    font-size: 18px;\r\n  }\r\n\r\n  .advertisement {\r\n    position: absolute;\r\n    top: 610px;\r\n    left: 100px;\r\n  }\r\n\r\n  .advertisement span {\r\n    padding-right: 40px;\r\n  }\r\n\r\n  .advertisement .seePicture {\r\n    width: 150px;\r\n    height: 35px;\r\n    background: #94cbff;\r\n    border-radius: 10px;\r\n    border: none;\r\n    font-size: 18px;\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .advertisement .seePicture:hover {\r\n    cursor: pointer;\r\n    opacity: 0.7;\r\n  }\r\n\r\n  .advertisement .upload {\r\n    width: 150px;\r\n    height: 35px;\r\n    background: #94cbff;\r\n    border-radius: 10px;\r\n    border: none;\r\n    font-size: 18px;\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .advertisement .upload:hover {\r\n    cursor: pointer;\r\n    opacity: 0.7;\r\n  }\r\n\r\n  .jump {\r\n    position: absolute;\r\n    top: 670px;\r\n    left: 100px;\r\n  }\r\n\r\n  .jump span {\r\n    padding-right: 40px;\r\n  }\r\n\r\n  .jump input {\r\n    width: 500px;\r\n    height: 30px;\r\n    padding: 5px;\r\n    font-size: 18px;\r\n  }\r\n\r\n  .jump .link {\r\n    width: 500px;\r\n    height: 30px;\r\n    padding: 5px;\r\n    font-size: 18px;\r\n  }\r\n\r\n  .modifying .cancel {\r\n    position: absolute;\r\n    top: 660px;\r\n    right: 170px;\r\n    width: 100px;\r\n    height: 50px;\r\n    border-radius: 6px;\r\n    border: 2px solid skyblue;\r\n    line-height: 50px;\r\n    text-align: center;\r\n    font-size: 20px;\r\n    color: #1990FF;\r\n    font-weight: 700;\r\n  }\r\n\r\n  .modifying .cancel:hover {\r\n    background-color: #D6ECFF;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .modifying .chess {\r\n    position: absolute;\r\n    top: 660px;\r\n    right: 60px;\r\n    width: 100px;\r\n    height: 50px;\r\n    border-radius: 6px;\r\n    border: 2px solid skyblue;\r\n    line-height: 50px;\r\n    text-align: center;\r\n    font-size: 20px;\r\n    color: #1990FF;\r\n    font-weight: 700;\r\n  }\r\n\r\n  .modifying .chess:hover {\r\n    background-color: #D6ECFF;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .picture {\r\n    position: absolute;\r\n    width: 800px;\r\n    height: 500px;\r\n    left: 400px;\r\n    top: 120px;\r\n    z-index: 1005;\r\n  }\r\n\r\n  .picture img {\r\n    width: 800px;\r\n    height: 500px;\r\n  }\r\n\r\n  .picture .closePic {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: 10px;\r\n    cursor: pointer;\r\n  }\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}